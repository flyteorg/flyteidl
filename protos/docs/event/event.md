# Protocol Documentation
<a name="top"></a>

## Table of Contents

- [flyteidl/event/event.proto](#flyteidl/event/event.proto)
    - [DynamicWorkflowNodeMetadata](#flyteidl.event.DynamicWorkflowNodeMetadata)
    - [ExternalResourceInfo](#flyteidl.event.ExternalResourceInfo)
    - [NodeExecutionEvent](#flyteidl.event.NodeExecutionEvent)
    - [ParentNodeExecutionMetadata](#flyteidl.event.ParentNodeExecutionMetadata)
    - [ParentTaskExecutionMetadata](#flyteidl.event.ParentTaskExecutionMetadata)
    - [ResourcePoolInfo](#flyteidl.event.ResourcePoolInfo)
    - [TaskExecutionEvent](#flyteidl.event.TaskExecutionEvent)
    - [TaskExecutionMetadata](#flyteidl.event.TaskExecutionMetadata)
    - [TaskNodeMetadata](#flyteidl.event.TaskNodeMetadata)
    - [WorkflowExecutionEvent](#flyteidl.event.WorkflowExecutionEvent)
    - [WorkflowNodeMetadata](#flyteidl.event.WorkflowNodeMetadata)
  
    - [TaskExecutionMetadata.InstanceClass](#flyteidl.event.TaskExecutionMetadata.InstanceClass)
  
- [Scalar Value Types](#scalar-value-types)



<a name="flyteidl/event/event.proto"></a>
<p align="right"><a href="#top">Top</a></p>

## flyteidl/event/event.proto



<a name="flyteidl.event.DynamicWorkflowNodeMetadata"></a>

### DynamicWorkflowNodeMetadata
For dynamic workflow nodes we send information about the dynamic workflow definition that gets generated.


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| id | [flyteidl.core.Identifier](#flyteidl.core.Identifier) |  | id represents the unique identifier of the workflow. |
| compiled_workflow | [flyteidl.core.CompiledWorkflowClosure](#flyteidl.core.CompiledWorkflowClosure) |  | Represents the compiled representation of the embedded dynamic workflow. |






<a name="flyteidl.event.ExternalResourceInfo"></a>

### ExternalResourceInfo
This message contains metadata about external resources produced or used by a specific task execution.


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| external_id | [string](#string) |  | Identifier for an external resource created by this task execution, for example Qubole query ID or presto query ids. |






<a name="flyteidl.event.NodeExecutionEvent"></a>

### NodeExecutionEvent



| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| id | [flyteidl.core.NodeExecutionIdentifier](#flyteidl.core.NodeExecutionIdentifier) |  | Unique identifier for this node execution |
| producer_id | [string](#string) |  | the id of the originator (Propeller) of the event |
| phase | [flyteidl.core.NodeExecution.Phase](#flyteidl.core.NodeExecution.Phase) |  |  |
| occurred_at | [google.protobuf.Timestamp](#google.protobuf.Timestamp) |  | This timestamp represents when the original event occurred, it is generated by the executor of the node. |
| input_uri | [string](#string) |  |  |
| output_uri | [string](#string) |  | URL to the output of the execution, it encodes all the information including Cloud source provider. ie., s3://... |
| error | [flyteidl.core.ExecutionError](#flyteidl.core.ExecutionError) |  | Error information for the execution |
| workflow_node_metadata | [WorkflowNodeMetadata](#flyteidl.event.WorkflowNodeMetadata) |  |  |
| task_node_metadata | [TaskNodeMetadata](#flyteidl.event.TaskNodeMetadata) |  |  |
| parent_task_metadata | [ParentTaskExecutionMetadata](#flyteidl.event.ParentTaskExecutionMetadata) |  | [To be deprecated] Specifies which task (if any) launched this node. |
| parent_node_metadata | [ParentNodeExecutionMetadata](#flyteidl.event.ParentNodeExecutionMetadata) |  | Specifies the parent node of the current node execution. Node executions at level zero will not have a parent node. |
| retry_group | [string](#string) |  | Retry group to indicate grouping of nodes by retries |
| spec_node_id | [string](#string) |  | Identifier of the node in the original workflow/graph This maps to value of WorkflowTemplate.nodes[X].id |
| node_name | [string](#string) |  | Friendly readable name for the node |






<a name="flyteidl.event.ParentNodeExecutionMetadata"></a>

### ParentNodeExecutionMetadata



| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| node_id | [string](#string) |  | Unique identifier of the parent node id within the execution This is value of core.NodeExecutionIdentifier.node_id of the parent node |






<a name="flyteidl.event.ParentTaskExecutionMetadata"></a>

### ParentTaskExecutionMetadata



| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| id | [flyteidl.core.TaskExecutionIdentifier](#flyteidl.core.TaskExecutionIdentifier) |  |  |






<a name="flyteidl.event.ResourcePoolInfo"></a>

### ResourcePoolInfo
This message holds task execution metadata specific to resource allocation used to manage concurrent
executions for a project namespace.


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| allocation_token | [string](#string) |  | Unique resource ID used to identify this execution when allocating a token. |
| namespace | [string](#string) |  | Namespace under which this task execution requested an allocation token. |






<a name="flyteidl.event.TaskExecutionEvent"></a>

### TaskExecutionEvent
Plugin specific execution event information. For tasks like Python, Hive, Spark, DynamicJob.


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| task_id | [flyteidl.core.Identifier](#flyteidl.core.Identifier) |  | ID of the task. In combination with the retryAttempt this will indicate the task execution uniquely for a given parent node execution. |
| parent_node_execution_id | [flyteidl.core.NodeExecutionIdentifier](#flyteidl.core.NodeExecutionIdentifier) |  | A task execution is always kicked off by a node execution, the event consumer will use the parent_id to relate the task to it&#39;s parent node execution |
| retry_attempt | [uint32](#uint32) |  | retry attempt number for this task, ie., 2 for the second attempt |
| phase | [flyteidl.core.TaskExecution.Phase](#flyteidl.core.TaskExecution.Phase) |  | Phase associated with the event |
| producer_id | [string](#string) |  | id of the process that sent this event, mainly for trace debugging |
| logs | [flyteidl.core.TaskLog](#flyteidl.core.TaskLog) | repeated | log information for the task execution |
| occurred_at | [google.protobuf.Timestamp](#google.protobuf.Timestamp) |  | This timestamp represents when the original event occurred, it is generated by the executor of the task. |
| input_uri | [string](#string) |  | URI of the input file, it encodes all the information including Cloud source provider. ie., s3://... |
| output_uri | [string](#string) |  | URI to the output of the execution, it will be in a format that encodes all the information including Cloud source provider. ie., s3://... |
| error | [flyteidl.core.ExecutionError](#flyteidl.core.ExecutionError) |  | Error information for the execution |
| custom_info | [google.protobuf.Struct](#google.protobuf.Struct) |  | Custom data that the task plugin sends back. This is extensible to allow various plugins in the system. |
| phase_version | [uint32](#uint32) |  | Some phases, like RUNNING, can send multiple events with changed metadata (new logs, additional custom_info, etc) that should be recorded regardless of the lack of phase change. The version field should be incremented when metadata changes across the duration of an individual phase. |
| reason | [string](#string) |  | An optional explanation for the phase transition. |
| task_type | [string](#string) |  | A predefined yet extensible Task type identifier. If the task definition is already registered in flyte admin this type will be identical, but not all task executions necessarily use pre-registered definitions and this type is useful to render the task in the UI, filter task executions, etc. |
| metadata | [TaskExecutionMetadata](#flyteidl.event.TaskExecutionMetadata) |  | Metadata around how a task was executed. |






<a name="flyteidl.event.TaskExecutionMetadata"></a>

### TaskExecutionMetadata
Holds metadata around how a task was executed.
As a task transitions across event phases during execution some attributes, such its generated name, generated external resources,
and more may grow in size but not change necessarily based on the phase transition that sparked the event update.
Metadata is a container for these attributes across the task execution lifecycle.


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| generated_name | [string](#string) |  | Unique, generated name for this task execution used by the backend. |
| external_resources | [ExternalResourceInfo](#flyteidl.event.ExternalResourceInfo) | repeated | Additional data on external resources on other back-ends or platforms (e.g. Hive, Qubole, etc) launched by this task execution. |
| resource_pool_info | [ResourcePoolInfo](#flyteidl.event.ResourcePoolInfo) | repeated | Includes additional data on concurrent resource management used during execution.. This is a repeated field because a plugin can request multiple resource allocations during execution. |
| plugin_identifier | [string](#string) |  | The identifier of the plugin used to execute this task. |
| instance_class | [TaskExecutionMetadata.InstanceClass](#flyteidl.event.TaskExecutionMetadata.InstanceClass) |  |  |






<a name="flyteidl.event.TaskNodeMetadata"></a>

### TaskNodeMetadata



| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| cache_status | [flyteidl.core.CatalogCacheStatus](#flyteidl.core.CatalogCacheStatus) |  | Captures the status of caching for this execution. |
| catalog_key | [flyteidl.core.CatalogMetadata](#flyteidl.core.CatalogMetadata) |  | This structure carries the catalog artifact information |
| dynamic_workflow | [DynamicWorkflowNodeMetadata](#flyteidl.event.DynamicWorkflowNodeMetadata) |  | In the case this task launched a dynamic workflow we capture its structure here. |






<a name="flyteidl.event.WorkflowExecutionEvent"></a>

### WorkflowExecutionEvent



| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| execution_id | [flyteidl.core.WorkflowExecutionIdentifier](#flyteidl.core.WorkflowExecutionIdentifier) |  | Workflow execution id |
| producer_id | [string](#string) |  | the id of the originator (Propeller) of the event |
| phase | [flyteidl.core.WorkflowExecution.Phase](#flyteidl.core.WorkflowExecution.Phase) |  |  |
| occurred_at | [google.protobuf.Timestamp](#google.protobuf.Timestamp) |  | This timestamp represents when the original event occurred, it is generated by the executor of the workflow. |
| output_uri | [string](#string) |  | URL to the output of the execution, it encodes all the information including Cloud source provider. ie., s3://... |
| error | [flyteidl.core.ExecutionError](#flyteidl.core.ExecutionError) |  | Error information for the execution |






<a name="flyteidl.event.WorkflowNodeMetadata"></a>

### WorkflowNodeMetadata
For Workflow Nodes we need to send information about the workflow that&#39;s launched


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| execution_id | [flyteidl.core.WorkflowExecutionIdentifier](#flyteidl.core.WorkflowExecutionIdentifier) |  |  |





 


<a name="flyteidl.event.TaskExecutionMetadata.InstanceClass"></a>

### TaskExecutionMetadata.InstanceClass
Includes the broad cateogry of machine used for this specific task execution.

| Name | Number | Description |
| ---- | ------ | ----------- |
| DEFAULT | 0 | The default instance class configured for the flyte application platform. |
| INTERRUPTIBLE | 1 | The instance class configured for interruptible tasks. |


 

 

 



## Scalar Value Types

| .proto Type | Notes | C++ | Java | Python | Go | C# | PHP | Ruby |
| ----------- | ----- | --- | ---- | ------ | -- | -- | --- | ---- |
| <a name="double" /> double |  | double | double | float | float64 | double | float | Float |
| <a name="float" /> float |  | float | float | float | float32 | float | float | Float |
| <a name="int32" /> int32 | Uses variable-length encoding. Inefficient for encoding negative numbers – if your field is likely to have negative values, use sint32 instead. | int32 | int | int | int32 | int | integer | Bignum or Fixnum (as required) |
| <a name="int64" /> int64 | Uses variable-length encoding. Inefficient for encoding negative numbers – if your field is likely to have negative values, use sint64 instead. | int64 | long | int/long | int64 | long | integer/string | Bignum |
| <a name="uint32" /> uint32 | Uses variable-length encoding. | uint32 | int | int/long | uint32 | uint | integer | Bignum or Fixnum (as required) |
| <a name="uint64" /> uint64 | Uses variable-length encoding. | uint64 | long | int/long | uint64 | ulong | integer/string | Bignum or Fixnum (as required) |
| <a name="sint32" /> sint32 | Uses variable-length encoding. Signed int value. These more efficiently encode negative numbers than regular int32s. | int32 | int | int | int32 | int | integer | Bignum or Fixnum (as required) |
| <a name="sint64" /> sint64 | Uses variable-length encoding. Signed int value. These more efficiently encode negative numbers than regular int64s. | int64 | long | int/long | int64 | long | integer/string | Bignum |
| <a name="fixed32" /> fixed32 | Always four bytes. More efficient than uint32 if values are often greater than 2^28. | uint32 | int | int | uint32 | uint | integer | Bignum or Fixnum (as required) |
| <a name="fixed64" /> fixed64 | Always eight bytes. More efficient than uint64 if values are often greater than 2^56. | uint64 | long | int/long | uint64 | ulong | integer/string | Bignum |
| <a name="sfixed32" /> sfixed32 | Always four bytes. | int32 | int | int | int32 | int | integer | Bignum or Fixnum (as required) |
| <a name="sfixed64" /> sfixed64 | Always eight bytes. | int64 | long | int/long | int64 | long | integer/string | Bignum |
| <a name="bool" /> bool |  | bool | boolean | boolean | bool | bool | boolean | TrueClass/FalseClass |
| <a name="string" /> string | A string must always contain UTF-8 encoded or 7-bit ASCII text. | string | String | str/unicode | string | string | string | String (UTF-8) |
| <a name="bytes" /> bytes | May contain any arbitrary sequence of bytes. | string | ByteString | str | []byte | ByteString | string | String (ASCII-8BIT) |

