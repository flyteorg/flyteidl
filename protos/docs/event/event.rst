######################
Protocol Documentation
######################




.. _ref_flyteidl/event/event.proto:

flyteidl/event/event.proto
==================================================================





.. _ref_flyteidl.event.DynamicWorkflowNodeMetadata:

DynamicWorkflowNodeMetadata
------------------------------------------------------------------

For dynamic workflow nodes we send information about the dynamic workflow definition that gets generated.



.. csv-table:: DynamicWorkflowNodeMetadata type fields
   :header: "Field", "Type", "Label", "Description"
   :widths: auto

   "id", ":ref:`ref_flyteidl.core.Identifier`", "", "id represents the unique identifier of the workflow."
   "compiled_workflow", ":ref:`ref_flyteidl.core.CompiledWorkflowClosure`", "", "Represents the compiled representation of the embedded dynamic workflow."







.. _ref_flyteidl.event.ExternalResourceInfo:

ExternalResourceInfo
------------------------------------------------------------------

This message contains metadata about external resources produced or used by a specific task execution.



.. csv-table:: ExternalResourceInfo type fields
   :header: "Field", "Type", "Label", "Description"
   :widths: auto

   "external_id", ":ref:`ref_string`", "", "Identifier for an external resource created by this task execution, for example Qubole query ID or presto query ids."







.. _ref_flyteidl.event.NodeExecutionEvent:

NodeExecutionEvent
------------------------------------------------------------------





.. csv-table:: NodeExecutionEvent type fields
   :header: "Field", "Type", "Label", "Description"
   :widths: auto

   "id", ":ref:`ref_flyteidl.core.NodeExecutionIdentifier`", "", "Unique identifier for this node execution"
   "producer_id", ":ref:`ref_string`", "", "the id of the originator (Propeller) of the event"
   "phase", ":ref:`ref_flyteidl.core.NodeExecution.Phase`", "", ""
   "occurred_at", ":ref:`ref_google.protobuf.Timestamp`", "", "This timestamp represents when the original event occurred, it is generated by the executor of the node."
   "input_uri", ":ref:`ref_string`", "", ""
   "output_uri", ":ref:`ref_string`", "", "URL to the output of the execution, it encodes all the information including Cloud source provider. ie., s3://..."
   "error", ":ref:`ref_flyteidl.core.ExecutionError`", "", "Error information for the execution"
   "workflow_node_metadata", ":ref:`ref_flyteidl.event.WorkflowNodeMetadata`", "", ""
   "task_node_metadata", ":ref:`ref_flyteidl.event.TaskNodeMetadata`", "", ""
   "parent_task_metadata", ":ref:`ref_flyteidl.event.ParentTaskExecutionMetadata`", "", "[To be deprecated] Specifies which task (if any) launched this node."
   "parent_node_metadata", ":ref:`ref_flyteidl.event.ParentNodeExecutionMetadata`", "", "Specifies the parent node of the current node execution. Node executions at level zero will not have a parent node."
   "retry_group", ":ref:`ref_string`", "", "Retry group to indicate grouping of nodes by retries"
   "spec_node_id", ":ref:`ref_string`", "", "Identifier of the node in the original workflow/graph This maps to value of WorkflowTemplate.nodes[X].id"
   "node_name", ":ref:`ref_string`", "", "Friendly readable name for the node"







.. _ref_flyteidl.event.ParentNodeExecutionMetadata:

ParentNodeExecutionMetadata
------------------------------------------------------------------





.. csv-table:: ParentNodeExecutionMetadata type fields
   :header: "Field", "Type", "Label", "Description"
   :widths: auto

   "node_id", ":ref:`ref_string`", "", "Unique identifier of the parent node id within the execution This is value of core.NodeExecutionIdentifier.node_id of the parent node"







.. _ref_flyteidl.event.ParentTaskExecutionMetadata:

ParentTaskExecutionMetadata
------------------------------------------------------------------





.. csv-table:: ParentTaskExecutionMetadata type fields
   :header: "Field", "Type", "Label", "Description"
   :widths: auto

   "id", ":ref:`ref_flyteidl.core.TaskExecutionIdentifier`", "", ""







.. _ref_flyteidl.event.ResourcePoolInfo:

ResourcePoolInfo
------------------------------------------------------------------

This message holds task execution metadata specific to resource allocation used to manage concurrent
executions for a project namespace.



.. csv-table:: ResourcePoolInfo type fields
   :header: "Field", "Type", "Label", "Description"
   :widths: auto

   "allocation_token", ":ref:`ref_string`", "", "Unique resource ID used to identify this execution when allocating a token."
   "namespace", ":ref:`ref_string`", "", "Namespace under which this task execution requested an allocation token."







.. _ref_flyteidl.event.TaskExecutionEvent:

TaskExecutionEvent
------------------------------------------------------------------

Plugin specific execution event information. For tasks like Python, Hive, Spark, DynamicJob.



.. csv-table:: TaskExecutionEvent type fields
   :header: "Field", "Type", "Label", "Description"
   :widths: auto

   "task_id", ":ref:`ref_flyteidl.core.Identifier`", "", "ID of the task. In combination with the retryAttempt this will indicate the task execution uniquely for a given parent node execution."
   "parent_node_execution_id", ":ref:`ref_flyteidl.core.NodeExecutionIdentifier`", "", "A task execution is always kicked off by a node execution, the event consumer will use the parent_id to relate the task to it's parent node execution"
   "retry_attempt", ":ref:`ref_uint32`", "", "retry attempt number for this task, ie., 2 for the second attempt"
   "phase", ":ref:`ref_flyteidl.core.TaskExecution.Phase`", "", "Phase associated with the event"
   "producer_id", ":ref:`ref_string`", "", "id of the process that sent this event, mainly for trace debugging"
   "logs", ":ref:`ref_flyteidl.core.TaskLog`", "repeated", "log information for the task execution"
   "occurred_at", ":ref:`ref_google.protobuf.Timestamp`", "", "This timestamp represents when the original event occurred, it is generated by the executor of the task."
   "input_uri", ":ref:`ref_string`", "", "URI of the input file, it encodes all the information including Cloud source provider. ie., s3://..."
   "output_uri", ":ref:`ref_string`", "", "URI to the output of the execution, it will be in a format that encodes all the information including Cloud source provider. ie., s3://..."
   "error", ":ref:`ref_flyteidl.core.ExecutionError`", "", "Error information for the execution"
   "custom_info", ":ref:`ref_google.protobuf.Struct`", "", "Custom data that the task plugin sends back. This is extensible to allow various plugins in the system."
   "phase_version", ":ref:`ref_uint32`", "", "Some phases, like RUNNING, can send multiple events with changed metadata (new logs, additional custom_info, etc) that should be recorded regardless of the lack of phase change. The version field should be incremented when metadata changes across the duration of an individual phase."
   "reason", ":ref:`ref_string`", "", "An optional explanation for the phase transition."
   "task_type", ":ref:`ref_string`", "", "A predefined yet extensible Task type identifier. If the task definition is already registered in flyte admin this type will be identical, but not all task executions necessarily use pre-registered definitions and this type is useful to render the task in the UI, filter task executions, etc."
   "metadata", ":ref:`ref_flyteidl.event.TaskExecutionMetadata`", "", "Metadata around how a task was executed."







.. _ref_flyteidl.event.TaskExecutionMetadata:

TaskExecutionMetadata
------------------------------------------------------------------

Holds metadata around how a task was executed.
As a task transitions across event phases during execution some attributes, such its generated name, generated external resources,
and more may grow in size but not change necessarily based on the phase transition that sparked the event update.
Metadata is a container for these attributes across the task execution lifecycle.



.. csv-table:: TaskExecutionMetadata type fields
   :header: "Field", "Type", "Label", "Description"
   :widths: auto

   "generated_name", ":ref:`ref_string`", "", "Unique, generated name for this task execution used by the backend."
   "external_resources", ":ref:`ref_flyteidl.event.ExternalResourceInfo`", "repeated", "Additional data on external resources on other back-ends or platforms (e.g. Hive, Qubole, etc) launched by this task execution."
   "resource_pool_info", ":ref:`ref_flyteidl.event.ResourcePoolInfo`", "repeated", "Includes additional data on concurrent resource management used during execution.. This is a repeated field because a plugin can request multiple resource allocations during execution."
   "plugin_identifier", ":ref:`ref_string`", "", "The identifier of the plugin used to execute this task."
   "instance_class", ":ref:`ref_flyteidl.event.TaskExecutionMetadata.InstanceClass`", "", ""







.. _ref_flyteidl.event.TaskNodeMetadata:

TaskNodeMetadata
------------------------------------------------------------------





.. csv-table:: TaskNodeMetadata type fields
   :header: "Field", "Type", "Label", "Description"
   :widths: auto

   "cache_status", ":ref:`ref_flyteidl.core.CatalogCacheStatus`", "", "Captures the status of caching for this execution."
   "catalog_key", ":ref:`ref_flyteidl.core.CatalogMetadata`", "", "This structure carries the catalog artifact information"
   "dynamic_workflow", ":ref:`ref_flyteidl.event.DynamicWorkflowNodeMetadata`", "", "In the case this task launched a dynamic workflow we capture its structure here."







.. _ref_flyteidl.event.WorkflowExecutionEvent:

WorkflowExecutionEvent
------------------------------------------------------------------





.. csv-table:: WorkflowExecutionEvent type fields
   :header: "Field", "Type", "Label", "Description"
   :widths: auto

   "execution_id", ":ref:`ref_flyteidl.core.WorkflowExecutionIdentifier`", "", "Workflow execution id"
   "producer_id", ":ref:`ref_string`", "", "the id of the originator (Propeller) of the event"
   "phase", ":ref:`ref_flyteidl.core.WorkflowExecution.Phase`", "", ""
   "occurred_at", ":ref:`ref_google.protobuf.Timestamp`", "", "This timestamp represents when the original event occurred, it is generated by the executor of the workflow."
   "output_uri", ":ref:`ref_string`", "", "URL to the output of the execution, it encodes all the information including Cloud source provider. ie., s3://..."
   "error", ":ref:`ref_flyteidl.core.ExecutionError`", "", "Error information for the execution"







.. _ref_flyteidl.event.WorkflowNodeMetadata:

WorkflowNodeMetadata
------------------------------------------------------------------

For Workflow Nodes we need to send information about the workflow that's launched



.. csv-table:: WorkflowNodeMetadata type fields
   :header: "Field", "Type", "Label", "Description"
   :widths: auto

   "execution_id", ":ref:`ref_flyteidl.core.WorkflowExecutionIdentifier`", "", ""





 <!-- end messages -->



.. _ref_flyteidl.event.TaskExecutionMetadata.InstanceClass:

TaskExecutionMetadata.InstanceClass
------------------------------------------------------------------

Includes the broad cateogry of machine used for this specific task execution.

.. csv-table:: Enum TaskExecutionMetadata.InstanceClass values
   :header: "Name", "Number", "Description"
   :widths: auto

   "DEFAULT", "0", "The default instance class configured for the flyte application platform."
   "INTERRUPTIBLE", "1", "The instance class configured for interruptible tasks."

 <!-- end enums -->

 <!-- end HasExtensions -->

 <!-- end services -->


