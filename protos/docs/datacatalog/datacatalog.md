# Protocol Documentation
<a name="top"></a>

## Table of Contents

- [flyteidl/datacatalog/datacatalog.proto](#flyteidl/datacatalog/datacatalog.proto)
    - [AddTagRequest](#datacatalog.AddTagRequest)
    - [AddTagResponse](#datacatalog.AddTagResponse)
    - [Artifact](#datacatalog.Artifact)
    - [ArtifactData](#datacatalog.ArtifactData)
    - [ArtifactPropertyFilter](#datacatalog.ArtifactPropertyFilter)
    - [CreateArtifactRequest](#datacatalog.CreateArtifactRequest)
    - [CreateArtifactResponse](#datacatalog.CreateArtifactResponse)
    - [CreateDatasetRequest](#datacatalog.CreateDatasetRequest)
    - [CreateDatasetResponse](#datacatalog.CreateDatasetResponse)
    - [Dataset](#datacatalog.Dataset)
    - [DatasetID](#datacatalog.DatasetID)
    - [DatasetPropertyFilter](#datacatalog.DatasetPropertyFilter)
    - [ExtendReservationRequest](#datacatalog.ExtendReservationRequest)
    - [ExtendReservationResponse](#datacatalog.ExtendReservationResponse)
    - [FilterExpression](#datacatalog.FilterExpression)
    - [GetArtifactRequest](#datacatalog.GetArtifactRequest)
    - [GetArtifactResponse](#datacatalog.GetArtifactResponse)
    - [GetDatasetRequest](#datacatalog.GetDatasetRequest)
    - [GetDatasetResponse](#datacatalog.GetDatasetResponse)
    - [GetOrReserveArtifactRequest](#datacatalog.GetOrReserveArtifactRequest)
    - [GetOrReserveArtifactResponse](#datacatalog.GetOrReserveArtifactResponse)
    - [KeyValuePair](#datacatalog.KeyValuePair)
    - [ListArtifactsRequest](#datacatalog.ListArtifactsRequest)
    - [ListArtifactsResponse](#datacatalog.ListArtifactsResponse)
    - [ListDatasetsRequest](#datacatalog.ListDatasetsRequest)
    - [ListDatasetsResponse](#datacatalog.ListDatasetsResponse)
    - [Metadata](#datacatalog.Metadata)
    - [Metadata.KeyMapEntry](#datacatalog.Metadata.KeyMapEntry)
    - [PaginationOptions](#datacatalog.PaginationOptions)
    - [Partition](#datacatalog.Partition)
    - [PartitionPropertyFilter](#datacatalog.PartitionPropertyFilter)
    - [ReleaseReservationRequest](#datacatalog.ReleaseReservationRequest)
    - [ReleaseReservationResponse](#datacatalog.ReleaseReservationResponse)
    - [ReservationStatus](#datacatalog.ReservationStatus)
    - [SinglePropertyFilter](#datacatalog.SinglePropertyFilter)
    - [Tag](#datacatalog.Tag)
    - [TagPropertyFilter](#datacatalog.TagPropertyFilter)
  
    - [PaginationOptions.SortKey](#datacatalog.PaginationOptions.SortKey)
    - [PaginationOptions.SortOrder](#datacatalog.PaginationOptions.SortOrder)
    - [ReservationStatus.State](#datacatalog.ReservationStatus.State)
    - [SinglePropertyFilter.ComparisonOperator](#datacatalog.SinglePropertyFilter.ComparisonOperator)
  
    - [DataCatalog](#datacatalog.DataCatalog)
  
- [Scalar Value Types](#scalar-value-types)



<a name="flyteidl/datacatalog/datacatalog.proto"></a>
<p align="right"><a href="#top">Top</a></p>

## flyteidl/datacatalog/datacatalog.proto



<a name="datacatalog.AddTagRequest"></a>

### AddTagRequest
Request message for tagging an Artifact.


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| tag | [Tag](#datacatalog.Tag) |  |  |






<a name="datacatalog.AddTagResponse"></a>

### AddTagResponse
Response message for tagging an Artifact.






<a name="datacatalog.Artifact"></a>

### Artifact
Artifact message. It is composed of several string fields.


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| id | [string](#string) |  | The unique ID of the artifact |
| dataset | [DatasetID](#datacatalog.DatasetID) |  | The Dataset that the artifact belongs to |
| data | [ArtifactData](#datacatalog.ArtifactData) | repeated | A list of data that is associated with the artifact |
| metadata | [Metadata](#datacatalog.Metadata) |  | Free-form metadata associated with the artifact |
| partitions | [Partition](#datacatalog.Partition) | repeated |  |
| tags | [Tag](#datacatalog.Tag) | repeated |  |
| created_at | [google.protobuf.Timestamp](#google.protobuf.Timestamp) |  | creation timestamp of artifact, autogenerated by service |






<a name="datacatalog.ArtifactData"></a>

### ArtifactData
ArtifactData that belongs to an artifact


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| name | [string](#string) |  |  |
| value | [flyteidl.core.Literal](#flyteidl.core.Literal) |  |  |






<a name="datacatalog.ArtifactPropertyFilter"></a>

### ArtifactPropertyFilter
Artifact properties we can filter by


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| artifact_id | [string](#string) |  |  |






<a name="datacatalog.CreateArtifactRequest"></a>

### CreateArtifactRequest
Request message for creating an Artifact and its associated artifact Data.


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| artifact | [Artifact](#datacatalog.Artifact) |  |  |






<a name="datacatalog.CreateArtifactResponse"></a>

### CreateArtifactResponse
Response message for creating an Artifact.






<a name="datacatalog.CreateDatasetRequest"></a>

### CreateDatasetRequest
Request message for creating a Dataset.


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| dataset | [Dataset](#datacatalog.Dataset) |  |  |






<a name="datacatalog.CreateDatasetResponse"></a>

### CreateDatasetResponse
Response message for creating a Dataset






<a name="datacatalog.Dataset"></a>

### Dataset
Dataset message. It is uniquely identified by DatasetID.


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| id | [DatasetID](#datacatalog.DatasetID) |  |  |
| metadata | [Metadata](#datacatalog.Metadata) |  |  |
| partitionKeys | [string](#string) | repeated |  |






<a name="datacatalog.DatasetID"></a>

### DatasetID
DatasetID message that is composed of several string fields.


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| project | [string](#string) |  | The name of the project |
| name | [string](#string) |  | The name of the dataset |
| domain | [string](#string) |  | The domain (eg. environment) |
| version | [string](#string) |  | Version of the data schema |
| UUID | [string](#string) |  | UUID for the dataset (if set the above fields are optional) |






<a name="datacatalog.DatasetPropertyFilter"></a>

### DatasetPropertyFilter
Dataset properties we can filter by


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| project | [string](#string) |  |  |
| name | [string](#string) |  |  |
| domain | [string](#string) |  |  |
| version | [string](#string) |  |  |






<a name="datacatalog.ExtendReservationRequest"></a>

### ExtendReservationRequest
Request to extend reservation


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| dataset_id | [DatasetID](#datacatalog.DatasetID) |  |  |
| tag_name | [string](#string) |  |  |
| owner_id | [string](#string) |  |  |






<a name="datacatalog.ExtendReservationResponse"></a>

### ExtendReservationResponse
Response to extend reservation






<a name="datacatalog.FilterExpression"></a>

### FilterExpression
Filter expression that is composed of a combination of single filters


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| filters | [SinglePropertyFilter](#datacatalog.SinglePropertyFilter) | repeated |  |






<a name="datacatalog.GetArtifactRequest"></a>

### GetArtifactRequest
Request message for retrieving an Artifact. Retrieve an artifact based on a query handle that
can be one of artifact_id or tag. The result returned will include the artifact data and metadata
associated with the artifact.


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| dataset | [DatasetID](#datacatalog.DatasetID) |  |  |
| artifact_id | [string](#string) |  |  |
| tag_name | [string](#string) |  |  |






<a name="datacatalog.GetArtifactResponse"></a>

### GetArtifactResponse
Response message for retrieving an Artifact. The result returned will include the artifact data
and metadata associated with the artifact.


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| artifact | [Artifact](#datacatalog.Artifact) |  |  |






<a name="datacatalog.GetDatasetRequest"></a>

### GetDatasetRequest
Request message for retrieving a Dataset. The Dataset is retrieved by it&#39;s unique identifier
which is a combination of several fields.


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| dataset | [DatasetID](#datacatalog.DatasetID) |  |  |






<a name="datacatalog.GetDatasetResponse"></a>

### GetDatasetResponse
Response message for retrieving a Dataset. The response will include the metadata for the
Dataset.


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| dataset | [Dataset](#datacatalog.Dataset) |  |  |






<a name="datacatalog.GetOrReserveArtifactRequest"></a>

### GetOrReserveArtifactRequest
Get the Artifact or try to reserve a spot if the Artifact does not exist.


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| dataset_id | [DatasetID](#datacatalog.DatasetID) |  |  |
| tag_name | [string](#string) |  |  |
| owner_id | [string](#string) |  |  |






<a name="datacatalog.GetOrReserveArtifactResponse"></a>

### GetOrReserveArtifactResponse
Response to get artifact or reserve spot.


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| artifact | [Artifact](#datacatalog.Artifact) |  |  |
| reservation_status | [ReservationStatus](#datacatalog.ReservationStatus) |  |  |






<a name="datacatalog.KeyValuePair"></a>

### KeyValuePair



| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| key | [string](#string) |  |  |
| value | [string](#string) |  |  |






<a name="datacatalog.ListArtifactsRequest"></a>

### ListArtifactsRequest
List the artifacts that belong to the Dataset, optionally filtered using filtered expression.


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| dataset | [DatasetID](#datacatalog.DatasetID) |  | Use a datasetID for which you want to retrieve the artifacts |
| filter | [FilterExpression](#datacatalog.FilterExpression) |  | Apply the filter expression to this query |
| pagination | [PaginationOptions](#datacatalog.PaginationOptions) |  | Pagination options to get a page of artifacts |






<a name="datacatalog.ListArtifactsResponse"></a>

### ListArtifactsResponse
Response to list artifacts


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| artifacts | [Artifact](#datacatalog.Artifact) | repeated | The list of artifacts |
| next_token | [string](#string) |  | Token to use to request the next page, pass this into the next requests PaginationOptions |






<a name="datacatalog.ListDatasetsRequest"></a>

### ListDatasetsRequest
List the datasets for the given query


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| filter | [FilterExpression](#datacatalog.FilterExpression) |  | Apply the filter expression to this query |
| pagination | [PaginationOptions](#datacatalog.PaginationOptions) |  | Pagination options to get a page of datasets |






<a name="datacatalog.ListDatasetsResponse"></a>

### ListDatasetsResponse
List the datasets response with token for next pagination


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| datasets | [Dataset](#datacatalog.Dataset) | repeated | The list of datasets |
| next_token | [string](#string) |  | Token to use to request the next page, pass this into the next requests PaginationOptions |






<a name="datacatalog.Metadata"></a>

### Metadata
Metadata representation for artifacts and datasets


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| key_map | [Metadata.KeyMapEntry](#datacatalog.Metadata.KeyMapEntry) | repeated | key map is a dictionary of key/val strings that represent metadata |






<a name="datacatalog.Metadata.KeyMapEntry"></a>

### Metadata.KeyMapEntry



| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| key | [string](#string) |  |  |
| value | [string](#string) |  |  |






<a name="datacatalog.PaginationOptions"></a>

### PaginationOptions
Pagination options for making list requests


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| limit | [uint32](#uint32) |  | the max number of results to return |
| token | [string](#string) |  | the token to pass to fetch the next page |
| sortKey | [PaginationOptions.SortKey](#datacatalog.PaginationOptions.SortKey) |  | the property that we want to sort the results by |
| sortOrder | [PaginationOptions.SortOrder](#datacatalog.PaginationOptions.SortOrder) |  | the sort order of the results |






<a name="datacatalog.Partition"></a>

### Partition
An artifact could have multiple partitions and each partition can have an arbitrary string key/value pair


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| key | [string](#string) |  |  |
| value | [string](#string) |  |  |






<a name="datacatalog.PartitionPropertyFilter"></a>

### PartitionPropertyFilter
Partition properties we can filter by


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| key_val | [KeyValuePair](#datacatalog.KeyValuePair) |  |  |






<a name="datacatalog.ReleaseReservationRequest"></a>

### ReleaseReservationRequest
Request to release reservation


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| dataset_id | [DatasetID](#datacatalog.DatasetID) |  |  |
| tag_name | [string](#string) |  |  |
| owner_id | [string](#string) |  |  |






<a name="datacatalog.ReleaseReservationResponse"></a>

### ReleaseReservationResponse
Response to release reservation






<a name="datacatalog.ReservationStatus"></a>

### ReservationStatus
Whether we successfully reserve a spot.


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| state | [ReservationStatus.State](#datacatalog.ReservationStatus.State) |  |  |
| metadata | [Metadata](#datacatalog.Metadata) |  |  |
| owner_id | [string](#string) |  |  |






<a name="datacatalog.SinglePropertyFilter"></a>

### SinglePropertyFilter
A single property to filter on.


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| tag_filter | [TagPropertyFilter](#datacatalog.TagPropertyFilter) |  |  |
| partition_filter | [PartitionPropertyFilter](#datacatalog.PartitionPropertyFilter) |  |  |
| artifact_filter | [ArtifactPropertyFilter](#datacatalog.ArtifactPropertyFilter) |  |  |
| dataset_filter | [DatasetPropertyFilter](#datacatalog.DatasetPropertyFilter) |  |  |
| operator | [SinglePropertyFilter.ComparisonOperator](#datacatalog.SinglePropertyFilter.ComparisonOperator) |  | field 10 in case we add more entities to query |






<a name="datacatalog.Tag"></a>

### Tag
Tag message that is unique to a Dataset. It is associated to a single artifact and
can be retrieved by name later.


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| name | [string](#string) |  | Name of tag |
| artifact_id | [string](#string) |  | The tagged artifact |
| dataset | [DatasetID](#datacatalog.DatasetID) |  | The Dataset that this tag belongs to |






<a name="datacatalog.TagPropertyFilter"></a>

### TagPropertyFilter
Tag properties we can filter by


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| tag_name | [string](#string) |  |  |





 


<a name="datacatalog.PaginationOptions.SortKey"></a>

### PaginationOptions.SortKey


| Name | Number | Description |
| ---- | ------ | ----------- |
| CREATION_TIME | 0 |  |



<a name="datacatalog.PaginationOptions.SortOrder"></a>

### PaginationOptions.SortOrder


| Name | Number | Description |
| ---- | ------ | ----------- |
| DESCENDING | 0 |  |
| ASCENDING | 1 |  |



<a name="datacatalog.ReservationStatus.State"></a>

### ReservationStatus.State


| Name | Number | Description |
| ---- | ------ | ----------- |
| ACQUIRED | 0 | Acquired the reservation successfully. |
| ALREADY_IN_PROGRESS | 1 | Indicates an existing active reservation exist for a different owner_id. |



<a name="datacatalog.SinglePropertyFilter.ComparisonOperator"></a>

### SinglePropertyFilter.ComparisonOperator
as use-cases come up we can add more operators, ex: gte, like, not eq etc.

| Name | Number | Description |
| ---- | ------ | ----------- |
| EQUALS | 0 |  |


 

 


<a name="datacatalog.DataCatalog"></a>

### DataCatalog
Data Catalog service definition
Data Catalog is a service for indexing parameterized, strongly-typed data artifacts across revisions.
Artifacts are associated with a Dataset, and can be tagged for retrieval.

| Method Name | Request Type | Response Type | Description |
| ----------- | ------------ | ------------- | ------------|
| CreateDataset | [CreateDatasetRequest](#datacatalog.CreateDatasetRequest) | [CreateDatasetResponse](#datacatalog.CreateDatasetResponse) | Create a new Dataset. Datasets are unique based on the DatasetID. Datasets are logical groupings of artifacts. Each dataset can have one or more artifacts |
| GetDataset | [GetDatasetRequest](#datacatalog.GetDatasetRequest) | [GetDatasetResponse](#datacatalog.GetDatasetResponse) | Get a Dataset by the DatasetID. This returns the Dataset with the associated metadata. |
| CreateArtifact | [CreateArtifactRequest](#datacatalog.CreateArtifactRequest) | [CreateArtifactResponse](#datacatalog.CreateArtifactResponse) | Create an artifact and the artifact data associated with it. An artifact can be a hive partition or arbitrary files or data values |
| GetArtifact | [GetArtifactRequest](#datacatalog.GetArtifactRequest) | [GetArtifactResponse](#datacatalog.GetArtifactResponse) | Retrieve an artifact by an identifying handle. This returns an artifact along with the artifact data. |
| AddTag | [AddTagRequest](#datacatalog.AddTagRequest) | [AddTagResponse](#datacatalog.AddTagResponse) | Associate a tag with an artifact. Tags are unique within a Dataset. |
| ListArtifacts | [ListArtifactsRequest](#datacatalog.ListArtifactsRequest) | [ListArtifactsResponse](#datacatalog.ListArtifactsResponse) | Return a paginated list of artifacts |
| ListDatasets | [ListDatasetsRequest](#datacatalog.ListDatasetsRequest) | [ListDatasetsResponse](#datacatalog.ListDatasetsResponse) | Return a paginated list of datasets |
| GetOrReserveArtifact | [GetOrReserveArtifactRequest](#datacatalog.GetOrReserveArtifactRequest) | [GetOrReserveArtifactResponse](#datacatalog.GetOrReserveArtifactResponse) | Get an artifact and the corresponding data. If the artifact does not exist, try to reserve a spot for populating the artifact.

Once you preserve a spot, you should call ExtendReservation API periodically to extend the reservation. Otherwise, the reservation can expire and other tasks may take the spot.

If the same owner_id calls this API for the same dataset and it has an active reservation and the artifacts have not been written yet by a different owner, the API will respond with an Acquired Reservation Status (providing idempotency).

Note: We may have multiple concurrent tasks with the same signature and the same input that try to populate the same artifact at the same time. Thus with reservation, only one task can run at a time, until the reservation expires.

Note: If task A does not extend the reservation in time and the reservation expires, another task B may take over the reservation, resulting in two tasks A and B running in parallel. So a third task C may get the Artifact from A or B, whichever writes last. |
| ExtendReservation | [ExtendReservationRequest](#datacatalog.ExtendReservationRequest) | [ExtendReservationResponse](#datacatalog.ExtendReservationResponse) | Extend the reservation to keep it from expiring. If the reservation expires, other tasks can take over the reservation by calling GetOrReserveArtifact. |
| ReleaseReservation | [ReleaseReservationRequest](#datacatalog.ReleaseReservationRequest) | [ReleaseReservationResponse](#datacatalog.ReleaseReservationResponse) | Release the reservation when the task holding the spot fails so that the other tasks can grab the spot. |

 



## Scalar Value Types

| .proto Type | Notes | C++ | Java | Python | Go | C# | PHP | Ruby |
| ----------- | ----- | --- | ---- | ------ | -- | -- | --- | ---- |
| <a name="double" /> double |  | double | double | float | float64 | double | float | Float |
| <a name="float" /> float |  | float | float | float | float32 | float | float | Float |
| <a name="int32" /> int32 | Uses variable-length encoding. Inefficient for encoding negative numbers – if your field is likely to have negative values, use sint32 instead. | int32 | int | int | int32 | int | integer | Bignum or Fixnum (as required) |
| <a name="int64" /> int64 | Uses variable-length encoding. Inefficient for encoding negative numbers – if your field is likely to have negative values, use sint64 instead. | int64 | long | int/long | int64 | long | integer/string | Bignum |
| <a name="uint32" /> uint32 | Uses variable-length encoding. | uint32 | int | int/long | uint32 | uint | integer | Bignum or Fixnum (as required) |
| <a name="uint64" /> uint64 | Uses variable-length encoding. | uint64 | long | int/long | uint64 | ulong | integer/string | Bignum or Fixnum (as required) |
| <a name="sint32" /> sint32 | Uses variable-length encoding. Signed int value. These more efficiently encode negative numbers than regular int32s. | int32 | int | int | int32 | int | integer | Bignum or Fixnum (as required) |
| <a name="sint64" /> sint64 | Uses variable-length encoding. Signed int value. These more efficiently encode negative numbers than regular int64s. | int64 | long | int/long | int64 | long | integer/string | Bignum |
| <a name="fixed32" /> fixed32 | Always four bytes. More efficient than uint32 if values are often greater than 2^28. | uint32 | int | int | uint32 | uint | integer | Bignum or Fixnum (as required) |
| <a name="fixed64" /> fixed64 | Always eight bytes. More efficient than uint64 if values are often greater than 2^56. | uint64 | long | int/long | uint64 | ulong | integer/string | Bignum |
| <a name="sfixed32" /> sfixed32 | Always four bytes. | int32 | int | int | int32 | int | integer | Bignum or Fixnum (as required) |
| <a name="sfixed64" /> sfixed64 | Always eight bytes. | int64 | long | int/long | int64 | long | integer/string | Bignum |
| <a name="bool" /> bool |  | bool | boolean | boolean | bool | bool | boolean | TrueClass/FalseClass |
| <a name="string" /> string | A string must always contain UTF-8 encoded or 7-bit ASCII text. | string | String | str/unicode | string | string | string | String (UTF-8) |
| <a name="bytes" /> bytes | May contain any arbitrary sequence of bytes. | string | ByteString | str | []byte | ByteString | string | String (ASCII-8BIT) |

